/*
  Licensed under the Apache License, Version 2.0
    http://www.apache.org/licenses/LICENSE-2.0.html

  AUTOGENERATED BY H2O at 2016-12-26T14:41:22.934+01:00
  3.10.0.8
  
  Standalone prediction code with sample test data for GLMModel named h2o_glm_03

  How to download, compile and execute:
      mkdir tmpdir
      cd tmpdir
      curl http://127.0.0.1:54321/3/h2o-genmodel.jar > h2o-genmodel.jar
      curl http://127.0.0.1:54321/3/Models.java/h2o_glm_03 > h2o_glm_03.java
      javac -cp h2o-genmodel.jar -J-Xmx2g -J-XX:MaxPermSize=128m h2o_glm_03.java

     (Note:  Try java argument -XX:+PrintCompilation to show runtime JIT compiler behavior.)
*/
import java.util.Map;
import hex.genmodel.GenModel;
import hex.genmodel.annotations.ModelPojo;

@ModelPojo(name="h2o_glm_03", algorithm="glm")
public class h2o_glm_03 extends GenModel {
  public hex.ModelCategory getModelCategory() { return hex.ModelCategory.Multinomial; }

  public boolean isSupervised() { return true; }
  public int nfeatures() { return 13; }
  public int nclasses() { return 5; }

  // Names of columns used by model.
  public static final String[] NAMES = NamesHolder_h2o_glm_03.VALUES;
  // Number of output classes included in training data response column.
  public static final int NCLASSES = 5;

  // Column domains. The last array contains domain of response column.
  public static final String[][] DOMAINS = new String[][] {
    /* X5 */ null,
    /* X12 */ null,
    /* X15 */ null,
    /* X17 */ null,
    /* X18 */ null,
    /* X19 */ null,
    /* X20 */ null,
    /* X21 */ null,
    /* X23 */ null,
    /* X27 */ null,
    /* X28 */ null,
    /* X34 */ null,
    /* X35 */ null,
    /* Label */ h2o_glm_03_ColInfo_13.VALUES
  };
  // Prior class distribution
  public static final double[] PRIOR_CLASS_DISTRIB = {0.27956989247311825,0.13978494623655913,0.15053763440860216,0.27956989247311825,0.15053763440860216};
  // Class distribution used for model building
  public static final double[] MODEL_CLASS_DISTRIB = null;

  public h2o_glm_03() { super(NAMES,DOMAINS); }
  public String getUUID() { return Long.toString(7588857900530834560L); }

  // Pass in data in a double[], pre-aligned to the Model's requirements.
  // Jam predictions into the preds[] array; preds[0] is reserved for the
  // main prediction (class for classifiers or value for regression),
  // and remaining columns hold a probability distribution for classifiers.
  public final double[] score0( double[] data, double[] preds ) {
    final double [] b = BETA.VALUES;
    for(int i = 0; i < 0; ++i) if(Double.isNaN(data[i])) data[i] = CAT_MODES.VALUES[i];
    for(int i = 0; i < 13; ++i) if(Double.isNaN(data[i + 0])) data[i+0] = NUM_MEANS.VALUES[i];
    preds[0] = 0;
    for(int c = 0; c < 5; ++c){
      preds[c+1] = 0;
      for(int i = 0; i < 13; ++i)
        preds[c+1] += b[0+i + c*14]*data[i];
      preds[c+1] += b[13 + c*14]; // reduce intercept
    }
    double max_row = 0;
    for(int c = 1; c < preds.length; ++c) if(preds[c] > max_row) max_row = preds[c];
    double sum_exp = 0;
    for(int c = 1; c < preds.length; ++c) { sum_exp += (preds[c] = Math.exp(preds[c]-max_row));}
    sum_exp = 1/sum_exp;
    double max_p = 0;
    for(int c = 1; c < preds.length; ++c) if((preds[c] *= sum_exp) > max_p){ max_p = preds[c]; preds[0] = c-1;};
    return preds;
  }
    public static class BETA implements java.io.Serializable {
      public static final double[] VALUES = new double[70];
      static {
        BETA_0.fill(VALUES);
      }
      static final class BETA_0 implements java.io.Serializable {
        static final void fill(double[] sa) {
          sa[0] = 0.0;
          sa[1] = 0.0;
          sa[2] = 0.0;
          sa[3] = -0.3393621001011604;
          sa[4] = -0.295340993722747;
          sa[5] = 0.0;
          sa[6] = 0.0;
          sa[7] = 0.0;
          sa[8] = 0.0;
          sa[9] = 0.0;
          sa[10] = -0.4493072489722778;
          sa[11] = 0.6647294656433156;
          sa[12] = -1.2723069587360019;
          sa[13] = -1.4160340192190704;
          sa[14] = 0.0;
          sa[15] = 0.0;
          sa[16] = 0.0;
          sa[17] = 0.0;
          sa[18] = 0.0;
          sa[19] = 0.0;
          sa[20] = -1.1024946726880427;
          sa[21] = 0.0;
          sa[22] = 0.0;
          sa[23] = 0.0;
          sa[24] = 0.0;
          sa[25] = 0.938373290944984;
          sa[26] = -0.5432352081844174;
          sa[27] = -1.886039950764321;
          sa[28] = 0.0;
          sa[29] = 0.0;
          sa[30] = 0.0;
          sa[31] = 0.4974928527593183;
          sa[32] = 0.0;
          sa[33] = -0.3293325399366882;
          sa[34] = 0.6942189291610277;
          sa[35] = 0.0;
          sa[36] = 0.0;
          sa[37] = 0.0;
          sa[38] = 0.0;
          sa[39] = -0.9011352935269901;
          sa[40] = 0.0;
          sa[41] = -1.7370308121318687;
          sa[42] = 0.0;
          sa[43] = 0.0;
          sa[44] = 0.0;
          sa[45] = 0.0;
          sa[46] = 0.0;
          sa[47] = 0.5577312606606613;
          sa[48] = 0.0;
          sa[49] = 0.0;
          sa[50] = 0.0;
          sa[51] = 0.0;
          sa[52] = 0.0;
          sa[53] = -0.4088100548678971;
          sa[54] = 1.4533172212788523;
          sa[55] = -1.4955694765308238;
          sa[56] = 0.0;
          sa[57] = -0.5130236000593427;
          sa[58] = 0.0;
          sa[59] = 0.0;
          sa[60] = 0.11582165604100514;
          sa[61] = 0.0;
          sa[62] = 0.0;
          sa[63] = 0.0;
          sa[64] = 0.0;
          sa[65] = 0.0;
          sa[66] = 1.9805245554605597;
          sa[67] = 0.0;
          sa[68] = 0.38876811994665217;
          sa[69] = -2.1069782002601927;
        }
      }
}
// Imputed numeric values
    static class NUM_MEANS implements java.io.Serializable {
      public static final double[] VALUES = new double[13];
      static {
        NUM_MEANS_0.fill(VALUES);
      }
      static final class NUM_MEANS_0 implements java.io.Serializable {
        static final void fill(double[] sa) {
          sa[0] = 0.12963007526913814;
          sa[1] = -0.28434343819750385;
          sa[2] = 0.16533916271791285;
          sa[3] = -0.230781585941314;
          sa[4] = -0.21714222044142092;
          sa[5] = 0.24060516529677614;
          sa[6] = -0.1439763183806573;
          sa[7] = 0.16225947063689145;
          sa[8] = 0.1596748714367146;
          sa[9] = 0.15724327577233047;
          sa[10] = 0.09107197068705597;
          sa[11] = -0.2715743440860215;
          sa[12] = -0.07282488172043011;
        }
      }
}
// Imputed categorical values.
    static class CAT_MODES implements java.io.Serializable {
      public static final int[] VALUES = new int[0];
      static {
      }
}
    // Categorical Offsets
    public static final int[] CATOFFS = {0};
}
// The class representing training column names
class NamesHolder_h2o_glm_03 implements java.io.Serializable {
  public static final String[] VALUES = new String[13];
  static {
    NamesHolder_h2o_glm_03_0.fill(VALUES);
  }
  static final class NamesHolder_h2o_glm_03_0 implements java.io.Serializable {
    static final void fill(String[] sa) {
      sa[0] = "X5";
      sa[1] = "X12";
      sa[2] = "X15";
      sa[3] = "X17";
      sa[4] = "X18";
      sa[5] = "X19";
      sa[6] = "X20";
      sa[7] = "X21";
      sa[8] = "X23";
      sa[9] = "X27";
      sa[10] = "X28";
      sa[11] = "X34";
      sa[12] = "X35";
    }
  }
}
// The class representing column Label
class h2o_glm_03_ColInfo_13 implements java.io.Serializable {
  public static final String[] VALUES = new String[5];
  static {
    h2o_glm_03_ColInfo_13_0.fill(VALUES);
  }
  static final class h2o_glm_03_ColInfo_13_0 implements java.io.Serializable {
    static final void fill(String[] sa) {
      sa[0] = "1";
      sa[1] = "2";
      sa[2] = "4";
      sa[3] = "5";
      sa[4] = "6";
    }
  }
}


